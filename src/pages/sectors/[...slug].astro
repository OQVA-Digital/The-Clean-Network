---
import { type CollectionEntry, getCollection } from "astro:content";
import SubpageLayout from "../../layouts/BaseLayout.astro";
import ContactSection from "../../components/ContactSection.astro"
import BackBt from "../../components/BackBt.astro";
import BlogStripe from "../../components/BlogStripe.astro";

export async function getStaticPaths() {
    const sectors = await getCollection("sectors");
    return sectors.map((sectors) => ({
        params: { slug: sectors.slug },
        props: sectors,
    }));
}
type Props = CollectionEntry<"sectors">;

const sectors = Astro.props;
const { Content } = await sectors.render();

import "../../styles/subpages.css"
import "../../styles/posts.css"

import { Schema } from "astro-seo-schema"
---

<SubpageLayout {...sectors.data}>
    <section class="intro">
        <BackBt url={`/sectors/#${(sectors.data.title).toLowerCase().replace(/\s+/g, '-')}`} label="Other sectors"/>

        <div class="cover">
			<img src={sectors.data.image} alt={sectors.data.description} class="reveal_delay" loading="lazy"/>
        </div>
    
    </section>

    <div class="content_ctnr">
        <article class="reveal">
            <h1>{sectors.data.title}</h1>

            <div class="post_content">
                <Content />
            </div>
        </article>

        <div class="cta_ctnr">
            <a href="/contact/" class="main cta" aria-label="Get a free quote for our cleaning sectors">Get a free quote</a>
        </div>
    
        <a href={`/sectors/#${(sectors.data.title).toLowerCase().replace(/\s+/g, '-')}`} class="back">Other sectors</a>
    </div>

    <ContactSection />

    <BlogStripe/>

    <Schema
        item={{
            "@context": "https://schema.org",
            "@type": "Article",
            headline: `${sectors.data.title} ${String(sectors.data.title).includes('Cleaning') ? " Service" : "Cleaning Service"}`,
            image: `${sectors.data.image}`,
            "author": [{
                "@type": "Organization",
                "name": "The Clean Network"
            }],
            "publisher": {
                "@type": "Organization",
                "name": "The Clean Network",
                "logo": {
                    "@type": "ImageObject",
                    "url": "/logo/tcn-logo-360.png"
                }
            }
        }}
    />
</SubpageLayout>