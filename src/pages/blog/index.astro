---
import { getCollection } from 'astro:content';
import FormattedDate from '../../components/FormattedDate.astro';
import BackBt from '../../components/BackBt.astro';

import BaseLayout from '../../layouts/BaseLayout.astro';

const posts = (await getCollection('blog')).sort(
	(a, b) =>  b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);

import '../../styles/blog.css'
import '../../styles/blog-home.css'
import '../../styles/blog-collection.css'

import { Schema } from "astro-seo-schema"
---

<BaseLayout title="Blog | The Clean Network">

	<main>
		<BackBt url={`/`} label="Return Home"/>

		<section class="intro">
			<div class="ctnr">
				<div class="content reveal">
					<h1 class="big"><sup>The Clean Network's </sup>Blog</h1>
	
					<h2>Lorem ipsum dolor sit amet consectetur adipisicing elit. Inventore similique nisi culpa, voluptatum possimus veritatis corrupti.</h2>

					<a href="#posts" class="cta" aria-label="Check our posts">Check Posts</a>
				</div>

				<img src={posts[0].data.heroImage} class="reveal" alt="Hero blog image">
			</div>
		</section>

		<div class="intro_copy">
			<p>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, <b>nascetur ridiculus mus</b>. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim.</p>
	
			<p>Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. <strong>Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus.</strong> Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. <b>Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum.</b> Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi. Nam eget dui. Etiam rhoncus. Maecenas tempus, tellus eget</p>


			<div class="anchors" title="See Posts">
				<a href="#cleaning">Cleaning</a>
				<a href="#health-and-environment">Health & Environment posts</a>
				<a href="#efficiency">Efficiency</a>
			</div>
		</div>
		
		<section class="scroll_margin_top" id="posts">
			<div class="center_base_width">
				<div class="subset scroll_margin_top" id="cleaning">
					<a href="/blog/cleaning/" class="caption">Cleaning</a>

					<ul class="posts">
						{
							posts.slice(0, 13).map((post) => (
								<>
								{post.data.category == "cleaning" ? (
									<li id={(post.data.title).toLowerCase().replace(/\s+/g, '-')} class="scroll_margin_top">
										<div class="ctnr reveal">
											<div class="content">
												<div class="ctnr">
													<div class="over_heading">
														<FormattedDate date={post.data.pubDate} />

														<hr/>

														<div class="author">by <cite>{post.data.author}</cite></div>
											
														<hr/>
											
														<a href={`/blog/${post.data.category}`} class="category_indicator" aria-label="Check same category posts" title="see category">{post.data.category == 'cleaning' ? 'Cleaning' : post.data.category == 'health-and-environment' ? 'Health & Environment' : post.data.category == 'efficiency' ? "Efficiency" : null}</a>
													</div>
				
													<a href={`/blog/${post.slug}/`}>
														<h3 class="title">{post.data.title}</h3>
													</a>

													{post.data.description ? (
														<p class="description">{post.data.description}</p>
													) : null}
	
													<a href={`/blog/${post.slug}/`} class="read_more">Read more</a>
												</div>
											</div>
			
											<a class="hero" href={`/blog/${post.slug}/`}>
												<img src={post.data.heroImage} alt={post.data.description} loading="lazy"/>
											</a>
										</div>
									</li>
								) : null}
								</>
							))
						}
					</ul>

					<a href="/blog/cleaning" class="check_all">Check All Cleaning Posts</a>
				</div>

				<div class="subset scroll_margin_top" id="health-and-environment">
					<a href="/blog/health-and-environment/" class="caption">Health & Environment</a>

					<ul class="posts">
						{
							posts.map((post) => (
								<>
								{post.data.category == "health-and-environment" ? (
									<li id={(post.data.title).toLowerCase().replace(/\s+/g, '-')} class="scroll_margin_top">
										<div class="ctnr reveal">
											<div class="content">
												<div class="ctnr">
													<FormattedDate date={post.data.pubDate} />
				
													<a href={`/blog/${post.slug}/`}>
														<h3 class="title">{post.data.title}</h3>
													</a>
	
													{post.data.description ? (
														<p class="description">{post.data.description}</p>
													) : null}
	
													<a href={`/blog/${post.slug}/`} class="read_more">Read more</a>
												</div>
											</div>
			
											<a class="hero" href={`/blog/${post.slug}/`}>
												<img src={post.data.heroImage} alt={post.data.description} loading="lazy"/>
											</a>
										</div>
									</li>
								) : null}
								</>
							))
						}
					</ul>
	
					<a href="/blog/health-and-environment" class="check_all">Check All Health & Environment Posts</a>
				</div>

				<div class="subset scroll_margin_top" id="efficiency">
					<a href="/blog/efficiency/" class="caption">Efficiency</a>

					<ul class="posts">
						{
							posts.map((post) => (
								<>
								{post.data.category == "efficiency" ? (
									<li id={(post.data.title).toLowerCase().replace(/\s+/g, '-')} class="scroll_margin_top">
										<div class="ctnr reveal">
											<div class="content">
												<div class="ctnr">
													<FormattedDate date={post.data.pubDate} />
				
													<a href={`/blog/${post.slug}/`}>
														<h3 class="title">{post.data.title}</h3>
													</a>
	
													{post.data.description ? (
														<p class="description">{post.data.description}</p>
													) : null}
	
													<a href={`/blog/${post.slug}/`} class="read_more">Read more</a>
												</div>
											</div>
			
											<a class="hero" href={`/blog/${post.slug}/`}>
												<img src={post.data.heroImage} alt={post.data.description} loading="lazy"/>
											</a>
										</div>
									</li>
								) : null}
								</>
							))
						}
					</ul>
	
					<a href="/blog/efficiency" class="check_all">Check All Efficiency Posts</a>
				</div>
			</div>
		</section>
	</main>

    <Schema
        item={{
			"@context": "https://schema.org",
			"@type": "Blog",
			"@id": "tcn-blog",
			"description": "The Clean Network, London's trusted partner in professional commercial and office cleaning. Reliable, high standards, tailored to your needs. See why 95% of our clients stay.",
			"name": "The Clean Network Blog"
		  }}
    />
</BaseLayout>
