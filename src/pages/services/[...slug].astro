---
import { CollectionEntry, getCollection } from "astro:content";
import SubpageLayout from "../../layouts/SubpageLayout.astro";
import ContactSection from "../../components/ContactSection.astro"

export async function getStaticPaths() {
    const services = await getCollection("services");
    return services.map((services) => ({
        params: { slug: services.slug },
        props: services,
    }));
}
type Props = CollectionEntry<"services">;

const services = Astro.props;
const { Content } = await services.render();

import "../../styles/posts.css"

import { Schema } from "astro-seo-schema"
---

<SubpageLayout {...services.data}>
    <section class="intro">

        <a href={`/services/#${(services.data.title).toLowerCase().replace(/\s+/g, '-')}`} class="back">Back to services</a>

        <div class="cover" style={`background-image: url(${services.data.image});`}></div>

        <div class="content">
            <h1>{services.data.title} {String(services.data.title).includes('Cleaning') ? "" : "Cleaning"}</h1>
    
            <p>{services.data.description}</p>
        </div>

        <!-- <img src={services.data.image} alt={`Photo of ${services.data.title} cleaning service`}> -->

        <hr>
    
    </section>

    <article>
        <Content />

        <a href="/contact/" class="cta" aria-label="Get a free quote for our cleaning services">Get a free quote</a>

        <a href={`/services/#${(services.data.title).toLowerCase().replace(/\s+/g, '-')}`} class="back">Back to services</a>
    </article>

    <ContactSection />

    <Schema
        item={{
            "@context": "https://schema.org",
            "@type": "Article",
            headline: `${services.data.title} ${String(services.data.title).includes('Cleaning') ? " Service" : "Cleaning Service"}`,
            image: `${services.data.image}`,
            "author": [{
                "@type": "Organization",
                "name": "The Clean Network"
            }],
            "publisher": {
                "@type": "Organization",
                "name": "The Clean Network",
                "logo": {
                    "@type": "ImageObject",
                    "url": "/logo/tcn-logo-360.png"
                }
            }
        }}
    />
</SubpageLayout>